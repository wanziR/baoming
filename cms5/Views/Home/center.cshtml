@model Models.UserInfo
@{
    Layout = "~/Views/Shared/_LayoutHome.cshtml";
    ViewBag.Title = "个人中心";
}

<link href="https://cdn.bootcss.com/bootstrap-select/1.12.4/css/bootstrap-select.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>

<style>
    body {
        color: black;
    }
</style>
<span>[ @Model.userName-@Model.userCompany ]</span>
<div class="list-group mg-15">
    <button type="button" class="list-group-item" data-toggle="modal" data-target="#geren"><i class="fa fa-user-o"> </i>个人设置<span class="badge">改</span></button>
    <button type="button" class="list-group-item" data-toggle="modal" data-target="#fapiao">
        <i class="fa fa-barcode"></i>发票管理 <span class="badge">@(Model.taxIsPu == 1 ? "普" : "专")</span>
    </button>
    <button type="button" class="list-group-item" data-toggle="modal" data-target="#qiandao"><i class="fa fa-sign-in"></i>签到管理 <span class="badge">否</span></button>
    <button type="button" class="list-group-item" data-toggle="modal" data-target="#jiaofei"><i class="fa fa-jpy"></i>缴费管理 <span class="badge">@(Model.feiIsOk == 1 ? "是" : "否")</span></button>

</div>
<!-- 个人设置  -->
<!-- Modal -->

    <div class="modal fade " id="geren" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel" style="color:black">编辑个人信息</h4>
                </div>

                <div class="modal-body">
                    <div class="form-group">
                        <label class="col-lg-2 col-xs-4   control-label">姓名：</label>
                        <div class="col-lg-10 col-xs-6">
                            <input name="userName" class="form-control" float-l" value="@Model.userName" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 col-xs-4 control-label">电话：</label>
                        <div class="col-lg-10 col-xs-6">
                            <input name="userPhone" class="form-control" float-l" value="@Model.userPhone" disabled />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 col-xs-4 control-label">公司：</label>
                        <div class="col-lg-10 col-xs-6">
                            <input name="userCompany" class="form-control" float-l" value="@Model.userCompany" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 col-xs-4 control-label">职务：</label>
                        <div class="col-lg-10 col-xs-6">
                            <input name="userPost" class="form-control" float-l" value="@Model.userPost" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 col-xs-4 control-label">地址：</label>
                        <div class="col-lg-10 col-xs-6">
                            <input name="userAddress" class="form-control" float-l" value="@Model.userAddress" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 col-xs-4 control-label">继续教育：</label>
                        <div class="col-lg-10 col-xs-6">
                            <input name="jxJiaoyu" class="form-control" float-l" value="@Model.jxJiaoyu" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary">修改</button>
                </div>
            </div>
        </div>
    </div>

<!-- /个人设置  -->
<!-- 发票管理  -->
<!-- Modal -->

    <div class="modal fade " id="fapiao" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel" style="color:black">编辑发票信息</h4>
                </div>

                <div class="modal-body">
                    <div class="form-group">
                        <label class="col-lg-4 col-xs-4 control-label">发票类型：</label>
                        <div class="col-lg-6 col-xs-6 text-left">
                            @{if (Model.taxIsPu == 1)
                                {
                                    <select class="selectpicker" name="taxIsPu" style="border-radius:3px; line-height:30px">
                                        <option value="0" selected>专票</option>
                                        <option value="1">普票</option>
                                    </select>
                                }
                                else
                                {
                                    <select name="taxIsPu">
                                        <option value="0">专票</option>
                                        <option value="1" selected>普票</option>
                                    </select>
                                }
                            }

                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-4 col-xs-4 control-label">发票抬头：</label>
                        <div class="col-lg-6 col-xs-6">
                            <input name="taxName" class="form-control" float-l" value="@Model.taxName" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-4  col-xs-4 control-label">纳税人识别号：</label>
                        <div class="col-lg-6 col-xs-6">
                            <input name="taxNumber" class="form-control" float-l" value="@Model.taxNumber" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-4 col-xs-4 control-label">开户行及帐号：</label>
                        <div class="col-lg-6 col-xs-6">
                            <input name="taxBank" class="form-control" float-l" value="@Model.taxBank" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-4 col-xs-4 control-label">开票地址：</label>
                        <div class="col-lg-6 col-xs-6">
                            <input name="taxAddress" class="form-control" float-l" value="@Model.taxAddress" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-4 col-xs-4 control-label">开票电话：</label>
                        <div class="col-lg-6 col-xs-6">
                            <input name="taxPhone" class="form-control" float-l" value="@Model.taxPhone" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="submit" class="btn btn-primary">修改</button>
                </div>
            </div>
        </div>
    </div>

<!-- /发票管理  -->
<!-- 签到管理   -->
<script type="text/javascript">
    function AddSuccess(data)
    {
       // $("#DelMsg").html(data).show().hide(5000);
        $("#btnSubmit").attr("disabled", true).css(({'background-color' : 'gray'}));
    }
</script>

<!-- Modal -->
<div class="modal fade" id="qiandao" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            @using (Ajax.BeginForm("AddQd", new AjaxOptions { UpdateTargetId = "AddMsg", OnSuccess = "AddSuccess" }))
            {
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel" style="color:black">开始签到 @*@DateTime.Now.ToLocalTime().ToString()*@</h4>
                    <a id="AddMsg" style="color:forestgreen;font-weight:bold"></a>
                </div>
                <div class="modal-body" style="color:black">
                    <span style="color:black">
                        您当前的位置：
                        <label id="point"></label>
                    </span><br>
                    @{
                        if (ViewBag.huiyi != null)
                        {
                            <div class="hidden">
                                @Html.TextBox("qdName", @DateTime.Now)
                                @Html.TextBox("userName",Model.userName)
                                @Html.TextBox("userPhone",Model.userPhone)
                                @Html.TextBox("qdAddress", "103.731761, 36.111419")
                            </div>
                            <button id="btnSubmit" class="btn-success btn-lg" type="submit">签&nbsp;到 </button>
                        }
                        else
                        {
                            <button id="btnSubmit" class="btn-default btn-lg" disabled style="background-color:gray">签到未开始 </button>
                        }
                    }
                    <div id="allmap"></div>
                </div>
            }
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">确定</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=PlhFWpA02aoURjAOpnWcRGqw7AI8EEyO"></script>
<script type="text/javascript">
    // 百度地图API功能
    var map = new BMap.Map("allmap");
    var point = new BMap.Point(103.731761,36.111419);
    map.centerAndZoom(point, 15);
    var geolocation = new BMap.Geolocation();
    geolocation.getCurrentPosition(function (r) {
        if (this.getStatus() == BMAP_STATUS_SUCCESS) {
            var mk = new BMap.Marker(r.point);
            map.addOverlay(mk);
            map.panTo(r.point);
            alert('您当前的位置：' + r.point.lng + ',' + r.point.lat);
            $("#point").text(r.point.lng + ',' + r.point.lat);
        } else {
            alert('failed' + this.getStatus());
            $("#point").text("103.731761, 36.111419");

        }
    }, {
        enableHighAccuracy: true
    })
</script>
<!-- /签到管理  -->
<!-- 缴费管理   -->
<!-- Modal -->
<div class="modal fade" id="jiaofei" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel" style="color:black">@Model.userName 的缴费状态</h4>
            </div>
            <div class="modal-body" style="color:black">

                @{if (Model.feiIsOk == 1)
                    {
                        <button class="btn-success btn-lg" disabled>你已缴费！ </button>
                    }
                    else
                    {
                        <span class="center-block" style="color:black">你还未缴费，扫描下方二维码缴费</span>
                        <img src="~/img/jiaofei.png" />
                    }
                }
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">确定</button>
            </div>
        </div>
    </div>
</div>
<!-- /缴费管理  -->
